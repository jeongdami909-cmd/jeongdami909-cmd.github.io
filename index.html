<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Lena's Library</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,600;0,700;1,400&family=Noto+Serif+KR:wght@300;400;600&display=swap" rel="stylesheet">
<link rel="stylesheet" as="style" crossorigin href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.8/dist/web/static/pretendard.css" />
<style>
:root {
  /* ğŸŒ¿ ë¯¼íŠ¸ ë”¥ ê·¸ë¦° í…Œë§ˆ ì»¬ëŸ¬ */
  --bg-color: #f2f6f4; /* ì•„ì£¼ ì—°í•œ ë¯¼íŠ¸ë¹› í¬ë¦¼ ë°°ê²½ */
  --primary-deep: #153b28; /* ìš°ì•„í•˜ê³  ë¬´ê²Œê° ìˆëŠ” ë”¥ ê·¸ë¦° */
  --accent-mint: #356b50; /* í¬ì¸íŠ¸ê°€ ë˜ëŠ” ì¤‘ê°„ ë¯¼íŠ¸ */
  --text-main: #1e2b24; /* í…ìŠ¤íŠ¸ ë”¥ê·¸ë¦° */
  --text-muted: #647d70; /* ë¶€ë“œëŸ¬ìš´ ë¯¼íŠ¸ ê·¸ë ˆì´ */
  --border-color: #d8e2dc;
  --card-bg: #ffffff;
}

* { margin:0; padding:0; box-sizing:border-box; }
/* ì „ì²´ í°íŠ¸ë¥¼ í”„ë¦¬í…ë‹¤ë“œë¡œ ë³€ê²½í•˜ì—¬ íˆ¬ë°•í•¨ ì œê±° */
body { font-family: 'Pretendard', -apple-system, sans-serif; background: var(--bg-color); color: var(--text-main); min-height: 100vh; padding-bottom: 80px; font-weight: 300; letter-spacing: -0.2px; }

/* í—¤ë” & í”„ë¡œí•„ */
.site-header { text-align: center; padding: 60px 20px 40px; }
.profile-pic { width: 85px; height: 85px; border-radius: 50%; object-fit: cover; margin-bottom: 20px; box-shadow: 0 8px 20px rgba(21, 59, 40, 0.15); border: 2px solid white; }
.site-title { font-family:'Playfair Display', serif; font-size: 2.6rem; font-weight:700; color: var(--primary-deep); margin-bottom: 12px; letter-spacing: -0.5px; }
.site-subtitle { font-size: 0.95rem; color: var(--text-muted); font-weight: 400; max-width: 500px; margin: 0 auto 25px; line-height: 1.6; }

/* ğŸ’¡ êµ¬ê¸€ ê²€ìƒ‰ì°½ ì¶”ê°€ (ë¯¼íŠ¸ í…Œë§ˆì— ë§ê²Œ ë””ìì¸) */
.search-container { max-width: 500px; margin: 0 auto 30px; padding: 0 20px; }
.google-search { display: flex; align-items: center; background: white; border-radius: 30px; padding: 10px 22px; box-shadow: 0 8px 20px rgba(21, 59, 40, 0.06); border: 1px solid var(--border-color); transition: 0.3s; }
.google-search:focus-within { border-color: var(--accent-mint); box-shadow: 0 8px 25px rgba(53, 107, 80, 0.15); }
.google-search input { flex: 1; border: none; outline: none; background: transparent; font-family: 'Pretendard', sans-serif; font-size: 0.95rem; color: var(--text-main); }
.google-search input::placeholder { color: #a4b5ac; }
.search-icon { font-size: 1.1rem; margin-right: 10px; color: var(--accent-mint); background: none; border: none; cursor: pointer; }

.btn-new { background: transparent; border: 1px solid var(--primary-deep); color: var(--primary-deep); padding: 10px 26px; border-radius: 50px; cursor: pointer; font-size: 0.85rem; font-weight: 500; transition: all 0.3s ease; }
.btn-new:hover { background: var(--primary-deep); color: white; box-shadow: 0 5px 15px rgba(21, 59, 40, 0.2); }

/* ì±…ì¥ ê·¸ë¦¬ë“œ */
.container { max-width: 1000px; margin: 0 auto; padding: 0 20px; }
.book-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(140px, 1fr)); gap: 40px 25px; }

.book-card { cursor: pointer; display: flex; flex-direction: column; align-items: center; text-align: center; transition: transform 0.3s ease; }
.book-card:hover { transform: translateY(-7px); }
.book-cover { width: 100%; aspect-ratio: 2 / 3; object-fit: cover; border-radius: 2px 8px 8px 2px; box-shadow: -2px 0 5px rgba(0,0,0,0.03), 8px 8px 20px rgba(21, 59, 40, 0.12); margin-bottom: 16px; background: #e0e8e4; }
.book-title { font-family: 'Noto Serif KR', serif; font-size: 1rem; font-weight: 600; line-height: 1.35; margin-bottom: 6px; word-break: keep-all; color: var(--primary-deep); }
.book-author { font-size: 0.8rem; color: var(--text-muted); font-weight: 400; }

/* ëª¨ë‹¬ ê³µí†µ */
.modal-overlay { display: none; position: fixed; inset: 0; background: rgba(20, 30, 25, 0.6); z-index: 1000; align-items: center; justify-content: center; padding: 20px; backdrop-filter: blur(6px); }
.modal-overlay.open { display: flex; }
.modal-content { background: white; width: 100%; max-width: 600px; max-height: 90vh; overflow-y: auto; padding: 45px; border-radius: 20px; box-shadow: 0 25px 50px rgba(21, 59, 40, 0.2); position: relative; }
.close-btn { position: absolute; top: 20px; right: 25px; font-size: 1.8rem; cursor: pointer; color: #a4b5ac; background: none; border: none; font-weight: 300; transition: 0.2s; }
.close-btn:hover { color: var(--primary-deep); }

/* ìƒì„¸ ë³´ê¸° ëª¨ë‹¬ */
.detail-layout { display: flex; flex-direction: column; align-items: center; text-align: center; }
.detail-cover { width: 150px; aspect-ratio: 2/3; object-fit: cover; border-radius: 2px 8px 8px 2px; box-shadow: 5px 10px 25px rgba(21, 59, 40, 0.15); margin-bottom: 25px; }
.detail-title { font-family:'Noto Serif KR', serif; font-size: 1.8rem; font-weight: 700; margin-bottom: 8px; color: var(--primary-deep); }
.detail-author { font-size: 0.95rem; color: var(--text-muted); margin-bottom: 35px; font-weight: 400; }

.section-title { font-size: 0.75rem; text-transform: uppercase; letter-spacing: 2px; color: var(--accent-mint); margin-bottom: 12px; font-weight: 600; }
.detail-quote { font-family:'Noto Serif KR', serif; font-size: 1.15rem; font-weight: 400; line-height: 1.8; color: var(--primary-deep); margin-bottom: 35px; position: relative; padding: 0 20px; word-break: keep-all; }
.detail-review { font-size: 1rem; line-height: 1.8; color: #3a4a42; text-align: left; width: 100%; border-top: 1px solid var(--border-color); padding-top: 30px; white-space: pre-wrap; font-weight: 400; }

.detail-actions { margin-top: 45px; display: flex; gap: 12px; width: 100%; justify-content: center; border-top: 1px solid var(--border-color); padding-top: 25px; }
.action-btn { background: #f2f6f4; border: 1px solid transparent; padding: 10px 22px; border-radius: 8px; font-size: 0.85rem; cursor: pointer; color: var(--accent-mint); font-weight: 500; transition: 0.2s; font-family: 'Pretendard', sans-serif; }
.action-btn:hover { background: white; border-color: var(--accent-mint); color: var(--primary-deep); }
.action-btn.delete { color: #d65a5a; background: #fff5f5; }
.action-btn.delete:hover { border-color: #d65a5a; }

/* í¼ ëª¨ë‹¬ */
.form-group { margin-bottom: 22px; text-align: left; }
.form-group label { display: block; font-size: 0.85rem; font-weight: 600; color: var(--accent-mint); margin-bottom: 8px; }
.form-group input, .form-group textarea { width: 100%; padding: 14px 16px; border: 1px solid var(--border-color); border-radius: 10px; font-family: 'Pretendard', sans-serif; font-size: 0.95rem; outline: none; background: #fafdfb; transition: 0.2s; color: var(--text-main); }
.form-group input:focus, .form-group textarea:focus { border-color: var(--accent-mint); background: white; box-shadow: 0 0 0 3px rgba(53, 107, 80, 0.1); }
.form-group textarea { min-height: 130px; resize: vertical; line-height: 1.6; }
.save-btn { width: 100%; background: var(--primary-deep); color: white; border: none; padding: 16px; border-radius: 10px; font-size: 1.05rem; font-weight: 600; cursor: pointer; margin-top: 15px; font-family: 'Pretendard', sans-serif; transition: 0.3s; }
.save-btn:hover { background: #0f2b1d; box-shadow: 0 6px 15px rgba(21, 59, 40, 0.2); }
</style>
</head>
<body>

<header class="site-header">
  <img src="https://images.unsplash.com/photo-1544716278-ca5e3f4abd8c?auto=format&fit=crop&w=200&q=80" alt="Profile" class="profile-pic">
  <h1 class="site-title">Lena's Library</h1>
  <p class="site-subtitle">ë‚˜ë¥¼ êµ¬ì„±í•˜ëŠ” ë¬¸ì¥ë“¤ê³¼ ê¹Šì€ ì‚¬ìœ ì˜ ê¸°ë¡ë“¤. ì±… í‘œì§€ë¥¼ í´ë¦­í•˜ë©´ ìƒì„¸í•œ ë¶ë¦¬í¬íŠ¸ë¥¼ ì½ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
  
  <div class="search-container">
    <form action="https://www.google.com/search" method="GET" target="_blank" class="google-search">
        <button type="submit" class="search-icon">ğŸ”</button>
        <input type="text" name="q" placeholder="êµ¬ê¸€ ì§€ì‹ ê²€ìƒ‰...">
    </form>
  </div>

  <button class="btn-new" onclick="openForm()">+ ìƒˆë¡œìš´ ì±… ê¸°ë¡í•˜ê¸°</button>
</header>

<main class="container">
  <div class="book-grid" id="bookGrid">
    </div>
</main>

<div class="modal-overlay" id="detailModal">
  <div class="modal-content">
    <button class="close-btn" onclick="closeModal('detailModal')">Ã—</button>
    <div class="detail-layout" id="detailContent"></div>
  </div>
</div>

<div class="modal-overlay" id="formModal">
  <div class="modal-content">
    <button class="close-btn" onclick="closeModal('formModal')">Ã—</button>
    <h2 id="formTitle" style="font-family:'Playfair Display', serif; margin-bottom: 25px; text-align: center; color: var(--primary-deep);">Add a Book</h2>
    
    <div class="form-group">
      <label>ì±… ì œëª©</label>
      <input type="text" id="f-title" placeholder="ì˜ˆ: ì•ˆë‚˜ ì¹´ë ˆë‹ˆë‚˜">
    </div>
    <div class="form-group">
      <label>ì§€ì€ì´</label>
      <input type="text" id="f-author" placeholder="ì˜ˆ: ë ˆí”„ í†¨ìŠ¤í† ì´">
    </div>
    <div class="form-group">
      <label>ì±… í‘œì§€ ì´ë¯¸ì§€ URL</label>
      <input type="text" id="f-img" placeholder="http://... (ì´ë¯¸ì§€ ë§í¬ ë³µì‚¬í•´ì„œ ë¶™ì—¬ë„£ê¸°)">
    </div>
    <div class="form-group">
      <label>ë°œì·Œ (ê¸°ì–µí•˜ê³  ì‹¶ì€ ë¬¸ì¥)</label>
      <textarea id="f-quote" placeholder="ì¸ìƒ ê¹Šì—ˆë˜ êµ¬ì ˆì„ ì ì–´ì£¼ì„¸ìš”."></textarea>
    </div>
    <div class="form-group">
      <label>ë‚˜ë§Œì˜ ë¶ë¦¬í¬íŠ¸ / ê°ìƒí‰</label>
      <textarea id="f-review" placeholder="ì ì§„ì ìœ¼ë¡œ ë“œëŸ¬ë‚˜ëŠ” ë‚´ë©´ì˜ ê¹Šì´ë‚˜, ì‚¬íšŒì  ë¶€ì¡°ë¦¬ì— ëŒ€í•œ ìƒê°ë“¤ì„ ììœ ë¡­ê²Œ ì ì–´ë³´ì„¸ìš”."></textarea>
    </div>
    <button class="save-btn" onclick="handleSave()">ê¸°ë¡ ì €ì¥í•˜ê¸°</button>
  </div>
</div>

<script>
const defaultBooks = [
  { id: 1, title: "ì•ˆë‚˜ ì¹´ë ˆë‹ˆë‚˜", author: "ë ˆí”„ í†¨ìŠ¤í† ì´", img: "https://images.unsplash.com/photo-1589829085413-56de8ae18c73?auto=format&fit=crop&w=600&q=80", quote: "í–‰ë³µí•œ ê°€ì •ì€ ëª¨ë‘ ì—‡ë¹„ìŠ·í•˜ê³ , ë¶ˆí–‰í•œ ê°€ì •ì€ ë¶ˆí–‰í•œ ì´ìœ ê°€ ì œê°ê¸° ë‹¤ë¥´ë‹¤.", review: "ì¸ê°„ ë³¸ì„±ì— ëŒ€í•œ ë‚ ì¹´ë¡œìš´ í†µì°°ë ¥. ìºë¦­í„°ì˜ ê²‰ëª¨ìŠµì´ ë²—ê²¨ì§€ë©° ì§„ì •í•œ ë‚´ë©´ì´ ë“œëŸ¬ë‚˜ëŠ” ê³¼ì •ì´ ì••ê¶Œì´ë‹¤." },
  { id: 2, title: "í˜¸ë°€ë°­ì˜ íŒŒìˆ˜ê¾¼", author: "J.D. ìƒë¦°ì €", img: "https://images.unsplash.com/photo-1544947950-fa07a98d237f?auto=format&fit=crop&w=600&q=80", quote: "ë‚˜ëŠ” ëŠ˜ ë„“ì€ í˜¸ë°€ë°­ì—ì„œ ê¼¬ë§ˆë“¤ì´ ì¬ë¯¸ìˆê²Œ ë†€ê³  ìˆëŠ” ëª¨ìŠµì„ ìƒìƒí•˜ê³¤ í–ˆì–´.", review: "ì‚¬íšŒì  ë¶€ì¡°ë¦¬ì™€ í—ˆìœ„ì— ëŒ€í•œ í™€ë“ ì˜ ì‹œì„ . ë³µì¡í•˜ê³  ì–´ì§€ëŸ¬ìš´ ì„¸ìƒ ì†ì—ì„œ ìˆœìˆ˜í•¨ì„ ì§€í‚¤ë ¤ëŠ” ëª¸ë¶€ë¦¼." }
];

let books = JSON.parse(localStorage.getItem('lena_premium_lib_v2'));
if (!books || books.length === 0) {
    books = defaultBooks;
    localStorage.setItem('lena_premium_lib_v2', JSON.stringify(books));
}

let currentEditId = null;

function renderGrid() {
    const grid = document.getElementById('bookGrid');
    grid.innerHTML = '';
    
    books.forEach(b => {
        const coverSrc = b.img || "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='200' height='300' viewBox='0 0 200 300'%3E%3Crect width='200' height='300' fill='%23e0e8e4'/%3E%3Ctext x='50%25' y='50%25' dominant-baseline='middle' text-anchor='middle' font-family='sans-serif' font-size='14px' fill='%23647d70'%3ENo Cover%3C/text%3E%3C/svg%3E";
        
        grid.innerHTML += `
            <div class="book-card" onclick="openDetail(${b.id})">
                <img src="${coverSrc}" class="book-cover" alt="cover">
                <div class="book-title">${b.title}</div>
                <div class="book-author">${b.author}</div>
            </div>
        `;
    });
}

function openModal(id) { document.getElementById(id).classList.add('open'); document.body.style.overflow = 'hidden'; }
function closeModal(id) { document.getElementById(id).classList.remove('open'); document.body.style.overflow = 'auto'; }

function openDetail(id) {
    const b = books.find(item => item.id === id);
    if(!b) return;
    
    const coverSrc = b.img || "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='200' height='300' viewBox='0 0 200 300'%3E%3Crect width='200' height='300' fill='%23e0e8e4'/%3E%3Ctext x='50%25' y='50%25' dominant-baseline='middle' text-anchor='middle' font-family='sans-serif' font-size='14px' fill='%23647d70'%3ENo Cover%3C/text%3E%3C/svg%3E";
    
    const content = document.getElementById('detailContent');
    content.innerHTML = `
        <img src="${coverSrc}" class="detail-cover">
        <h2 class="detail-title">${b.title}</h2>
        <div class="detail-author">${b.author}</div>
        
        ${b.quote ? `
        <div class="section-title">Highlight</div>
        <div class="detail-quote">"${b.quote}"</div>` : ''}
        
        ${b.review ? `
        <div class="section-title" style="text-align:left; width:100%; border-top:1px solid var(--border-color); padding-top:25px;">Book Report</div>
        <div class="detail-review">${b.review}</div>` : ''}
        
        <div class="detail-actions">
            <button class="action-btn" onclick="openForm(${b.id})">ìˆ˜ì •í•˜ê¸°</button>
            <button class="action-btn delete" onclick="deleteBook(${b.id})">ì‚­ì œí•˜ê¸°</button>
        </div>
    `;
    
    openModal('detailModal');
}

function openForm(id = null) {
    currentEditId = id;
    if(id) {
        closeModal('detailModal');
        const b = books.find(item => item.id === id);
        document.getElementById('f-title').value = b.title;
        document.getElementById('f-author').value = b.author || '';
        document.getElementById('f-img').value = b.img || '';
        document.getElementById('f-quote').value = b.quote || '';
        document.getElementById('f-review').value = b.review || '';
        document.getElementById('formTitle').innerText = "Edit Book";
    } else {
        document.getElementById('f-title').value = '';
        document.getElementById('f-author').value = '';
        document.getElementById('f-img').value = '';
        document.getElementById('f-quote').value = '';
        document.getElementById('f-review').value = '';
        document.getElementById('formTitle').innerText = "Add a Book";
    }
    openModal('formModal');
}

function handleSave() {
    const title = document.getElementById('f-title').value;
    const author = document.getElementById('f-author').value;
    const img = document.getElementById('f-img').value;
    const quote = document.getElementById('f-quote').value;
    const review = document.getElementById('f-review').value;

    if(!title) return alert("ì±… ì œëª©ì€ ê¼­ ì…ë ¥í•´ ì£¼ì„¸ìš”.");

    const data = { id: currentEditId || Date.now(), title, author, img, quote, review };

    if(currentEditId) {
        const idx = books.findIndex(b => b.id === currentEditId);
        books[idx] = data;
    } else {
        books.unshift(data);
    }
    
    localStorage.setItem('lena_premium_lib_v2', JSON.stringify(books));
    renderGrid();
    closeModal('formModal');
    if(currentEditId) openDetail(currentEditId); 
}

function deleteBook(id) {
    if(!confirm("ì´ ê¸°ë¡ì„ ì™„ì „íˆ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?")) return;
    books = books.filter(b => b.id !== id);
    localStorage.setItem('lena_premium_lib_v2', JSON.stringify(books));
    closeModal('detailModal');
    renderGrid();
}

renderGrid();
</script>
</body>
</html>
